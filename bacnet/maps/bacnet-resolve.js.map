{"version":3,"sources":["bacnet-resolve.js"],"names":["module","exports","RED","nodes","registerType","config","node","this","createNode","connector","getNode","server","fill","shape","text","on","msg","getDeviceAddressById","address","deviceId","_ref","net","adr","payload","deviceIPAddress"],"mappings":"aASAA,OAAOC,QAAU,SAAUC,GA+BzBA,EAHIC,MAAAC,aAAA,iBA3BJ,SAAwBC,GACtB,IAAMC,EAAOC,KACbL,EAAIC,MAAMK,WAAWF,EAAMD,GAG3BC,EAAKG,KAAAA,EAAYP,KAEjBI,EAAIA,UAAKG,EAAWN,MAAAO,QAAAL,EAAAM,QACJC,EAAIH,WAAlBH,EAA6BO,OAAO,CAAKD,KAAA,QAAAC,MAAA,MAAAC,KAAA,WAC3CR,EAAAS,GAAA,QAAA,SAAAC,GAEOV,EAACG,UAMNH,EAAKG,UAAUQ,qBAEoBD,EAArBE,QAAOC,SAAnB,SAAAC,GAAwB,IAAAF,EAAAE,EAAAF,QAAAG,EAAAD,EAAAC,IAAAC,EAAAF,EAAAE,IAAEA,EAAGC,QAAHD,gBAAG,CAAAJ,QAAAA,EAAAG,IAAAA,EAAAC,IAAAA,GAC3BN,EAAIO,KAAQC,IAGd,WAHgDF,EAAAA,MAAAA,IAAAA,MAAAA,oBAAAA,KARlDhB,EAAKA,MAAKG,IAAAA,MAAW,4BAAAO","file":"../bacnet-resolve.js","sourcesContent":["/*\n The MIT License\n\n Copyright (c) 2024 Colin Kuebler (kueblc)\n All rights reserved.\n node-red-contrib-bacnet\n */\n'use strict'\n\nmodule.exports = function (RED) {\n  function BACnetResolve (config) {\n    const node = this\n    RED.nodes.createNode(node, config)\n\n    node.name = config.name\n    node.connector = RED.nodes.getNode(config.server)\n\n    if (node.connector) {\n      node.status({ fill: 'green', shape: 'dot', text: 'active' })\n    }\n\n    node.on('input', function (msg) {\n      if (!node.connector) {\n        node.error(new Error('Client Not Ready To Read'), msg)\n        return\n      }\n\n      node.connector.getDeviceAddressById(\n        msg.payload.deviceId,\n        function ({ address, net, adr }) {\n          msg.payload.deviceIPAddress = { address, net, adr }\n          node.send(msg)\n        },\n        function () {\n          node.error(new Error('Device Not Found'), msg)\n        }\n      )\n    })\n  }\n\n  RED.nodes.registerType('BACnet-Resolve', BACnetResolve)\n}\n"]}