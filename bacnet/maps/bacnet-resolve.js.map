{"version":3,"sources":["bacnet-resolve.js"],"names":["module","exports","RED","nodes","adr","config","node","this","createNode","connector","getNode","server","status","fill","shape","text","on","msg","getDeviceAddressById","payload","deviceId","_ref","address","net","error","Error"],"mappings":"aASAA,OAAOC,QAAU,SAAUC,GA4BzBA,EAAIC,MAPkDC,aAAAA,iBApBtD,SAAwBC,GACtB,IAAMC,EAAOC,KACbL,EAAIC,MAAMK,WAAWF,EAAMD,GAG3BC,EAAKG,KAAAA,EAAYP,KAAjBI,EAAKG,UAAYP,EAAIC,MAAMO,QAAQL,EAAOM,QAGxCL,EAAKM,WAALN,EAAcO,OAAM,CAAAA,KAAR,QAAAC,MAAA,MAAAC,KAAA,WAGdT,EAHEU,GAAA,QAAA,SAAAC,GACDX,EAAAG,UAQCH,EAHEG,UAAAS,qBACDD,EAAAE,QAAAC,SAIC,SAAAC,GAAiC,IAArBC,EAAqBD,EAArBC,QAASC,EAAYF,EAAZE,IAAKnB,EAAOiB,EAAPjB,IAFxBa,EAACR,QAAUS,gBAAAA,CACbD,QAAAA,EAAIE,IAAAA,EAAQC,IAAAA,GACqBd,EAArBgB,KAAqBL,KANjCX,EAAKkB,MAAM,IAAIC,MAAM,4BAA6BR","file":"../bacnet-resolve.js","sourcesContent":["/*\n The MIT License\n\n Copyright (c) 2024 Colin Kuebler (kueblc)\n All rights reserved.\n node-red-contrib-bacnet\n */\n'use strict'\n\nmodule.exports = function (RED) {\n  function BACnetResolve (config) {\n    const node = this\n    RED.nodes.createNode(node, config)\n\n    node.name = config.name\n    node.connector = RED.nodes.getNode(config.server)\n\n    if (node.connector) {\n      node.status({ fill: 'green', shape: 'dot', text: 'active' })\n    }\n\n    node.on('input', function (msg) {\n      if (!node.connector) {\n        node.error(new Error('Client Not Ready To Read'), msg)\n        return\n      }\n\n      node.connector.getDeviceAddressById(\n        msg.payload.deviceId,\n        function ({ address, net, adr }) {\n          msg.payload.deviceIPAddress = { address, net, adr }\n          node.send(msg)\n        }\n      )\n    })\n  }\n\n  RED.nodes.registerType('BACnet-Resolve', BACnetResolve)\n}\n"]}